
<head><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<style>
    /* Reset and Base Styles */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Theme Variables */
    :root {
        /* Light Theme Colors */
        --primary-color: #4CAF50;
        --secondary-color: #2196F3;
        --danger-color: #f44336;
        --warning-color: #ff9800;
        --success-color: #4CAF50;
        --text-primary: #333;
        --text-secondary: #666;
        --bg-primary: #ffffff;
        --bg-secondary: #f5f5f5;
        --border-color: #e0e0e0;
        --shadow-color: rgba(0, 0, 0, 0.1);
        --card-bg: #ffffff;
        --hover-bg: #f5f5f5;
        --modal-bg: #ffffff;
        --input-bg: #ffffff;
        --input-border: #e0e0e0;
    }

    /* Dark Theme Colors */
    [data-theme="dark"] {
        --primary-color: #66bb6a;
        --secondary-color: #42a5f5;
        --danger-color: #ef5350;
        --warning-color: #ffa726;
        --success-color: #66bb6a;
        --text-primary: #ffffff;
        --text-secondary: #b0b0b0;
        --bg-primary: #1a1a1a;
        --bg-secondary: #2d2d2d;
        --border-color: #404040;
        --shadow-color: rgba(0, 0, 0, 0.3);
        --card-bg: #2d2d2d;
        --hover-bg: #404040;
        --modal-bg: #2d2d2d;
        --input-bg: #404040;
        --input-border: #505050;
    }

    /* Body and Layout */
    body {
        background-color: var(--bg-secondary);
        color: var(--text-primary);
        display: flex;
        min-height: 100vh;
        transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* Sidebar Styles */
    .sidebar {
        width: 250px;
        background-color: #2c3e50;
        color: white;
        padding: 20px;
        display: flex;
        flex-direction: column;
    }

    .sidebar-header {
        display: flex;
        align-items: center;
        margin-bottom: 30px;
    }

    .sidebar-header i {
        font-size: 24px;
        margin-right: 10px;
    }

    .sidebar-header span {
        font-size: 20px;
        font-weight: bold;
    }

    .sidebar-links {
        display: flex;
        flex-direction: column;
    }

    .sidebar-links a {
        color: white;
        text-decoration: none;
        padding: 12px 15px;
        margin-bottom: 10px;
        border-radius: 5px;
        display: flex;
        align-items: center;
        transition: background-color 0.3s ease;
    }

    .sidebar-links a:hover,
    .sidebar-links a.active {
        background-color: #34495e;
    }

    .sidebar-links a i {
        margin-right: 10px;
    }

    /* Main Content Area */
    .dashboard-content {
        flex-grow: 1;
        padding: 20px;
        overflow-y: auto;
    }

    /* Citizens Container */
    .citizens-container {
        background-color: var(--card-bg);
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 5px var(--shadow-color);
    }

    /* Header Section */
    .citizens-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .citizens-header h2 {
        color: var(--text-primary);
    }

    /* Search and Filter */
    .search-filter {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
    }

    .search-box {
        flex: 1;
        padding: 10px;
        border: 1px solid var(--border-color);
        border-radius: 5px;
        background-color: var(--input-bg);
        color: var(--text-primary);
    }

    .filter-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        background-color: var(--bg-secondary);
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .filter-btn:hover {
        background-color: var(--hover-bg);
    }

    /* Citizens Table */
    .citizens-table {
        width: 100%;
        border-collapse: collapse;
    }

    .citizens-table th,
    .citizens-table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid var(--border-color);
    }

    .citizens-table th {
        background-color: var(--bg-secondary);
        font-weight: 600;
    }

    .citizens-table tr:hover {
        background-color: var(--hover-bg);
    }

    /* Action Buttons */
    .action-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-right: 5px;
    }

    .view-btn {
        background-color: var(--secondary-color);
        color: white;
    }

    .edit-btn {
        background-color: var(--warning-color);
        color: white;
    }

    .delete-btn {
        background-color: var(--danger-color);
        color: white;
    }

    /* Citizen Details Modal */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
    }

    .modal-content {
        position: relative;
        background-color: var(--modal-bg);
        width: 90%;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px var(--shadow-color);
        max-height: 90vh;
        overflow-y: auto;
    }

    .modal-header {
        position: sticky;
        top: 0;
        background-color: var(--modal-bg);
        z-index: 1;
        padding: 10px 0;
        margin-bottom: 20px;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .modal-header h3 {
        color: var(--text-primary);
    }

    .close-btn {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: var(--text-secondary);
    }

    .citizen-details {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
    }

    .detail-group {
        margin-bottom: 15px;
    }

    .detail-label {
        font-weight: 600;
        color: var(--text-secondary);
        margin-bottom: 5px;
    }

    .detail-value {
        color: var(--text-primary);
    }

    /* Theme Toggle Button */
    .theme-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: var(--primary-color);
        color: white;
        border: none;
        font-size: 20px;
        cursor: pointer;
        box-shadow: 0 2px 5px var(--shadow-color);
        transition: all 0.3s ease;
        z-index: 100;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .theme-toggle:hover {
        transform: scale(1.1);
    }

    /* Pagination */
    .pagination {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 20px;
    }

    .page-btn {
        padding: 8px 12px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        background-color: var(--card-bg);
        color: var(--text-primary);
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .page-btn.active {
        background-color: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
    }

    /* New Citizen Modal */
    .citizen-form {
        padding: 20px;
    }

    .form-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        margin-bottom: 20px;
    }

    .form-group {
        margin-bottom: 15px;
    }

    .form-group.full-width {
        grid-column: 1 / -1;
    }

    .form-group label {
        display: block;
        margin-bottom: 5px;
        color: var(--text-secondary);
        font-weight: 500;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        background-color: var(--input-bg);
        color: var(--text-primary);
        font-size: 14px;
    }

    .form-group textarea {
        height: 100px;
        resize: vertical;
    }

    .form-actions {
        position: sticky;
        bottom: 0;
        background-color: var(--modal-bg);
        padding: 15px 0;
        margin-top: 20px;
        border-top: 1px solid var(--border-color);
        display: flex;
        justify-content: flex-end;
        gap: 10px;
    }

    .cancel-btn,
    .submit-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.3s ease;
    }

    .cancel-btn {
        background-color: var(--bg-secondary);
        color: var(--text-primary);
    }

    .submit-btn {
        background-color: var(--primary-color);
        color: white;
    }

    .cancel-btn:hover {
        background-color: var(--hover-bg);
    }

    .submit-btn:hover {
        opacity: 0.9;
    }

    /* Update scrollbar styles to only target modal-content */
    .modal-content::-webkit-scrollbar {
        width: 8px;
    }

    .modal-content::-webkit-scrollbar-track {
        background: var(--bg-secondary);
        border-radius: 4px;
    }

    .modal-content::-webkit-scrollbar-thumb {
        background: var(--primary-color);
        border-radius: 4px;
    }

    .modal-content::-webkit-scrollbar-thumb:hover {
        opacity: 0.8;
    }
</style>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-city"></i>
            <span>SmartCity</span>
        </div>
        <nav class="sidebar-links">
            <a href="{% url 'admin_dashboard' %}">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <a href="{% url 'complaints_dashboard' %}">
                <i class="fas fa-exclamation-circle"></i>
                <span>Complaints</span>
            </a>
            <a href="{% url 'analytics_dashboard' %}">
                <i class="fas fa-chart-line"></i>
                <span>Analytics</span>
            </a>
            <a href="{% url 'emergency_alerts_dashboard' %}">
                <i class="fas fa-user-circle"></i>
                <span>Emergency Alerts</span>
            </a>
            <a href="{% url 'citizens_dashboard' %}" class="active">
                <i class="fas fa-users"></i>
                <span>Citizens</span>
            </a>
           
            <a href="{% url 'events_dashboard' %}">
                <i class="fas fa-calendar-alt"></i>
                <span>Events</span>
            </a>
           
            <a href="{% url 'logout' %}" class="logout">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="dashboard-content">
        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        <div class="citizens-container">
            <div class="citizens-header">
                <h2>Citizens Management</h2>
                <button class="action-btn" onclick="openNewCitizenModal()">
                    <i class="fas fa-plus"></i> Add New Citizen
                </button>
            </div>

            <div class="search-filter">
                <input type="text" class="search-box" placeholder="Search citizens...">
                <button class="filter-btn">
                    <i class="fas fa-filter"></i> Filter
                </button>
            </div>

            <table class="citizens-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Age</th>
                        <th>Contact</th>
                        <th>Address</th>
                        <th>Occupation</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="citizensTableBody">
                    <!-- Citizen rows will be dynamically added here -->
                </tbody>
            </table>

            <div class="pagination">
                <button class="page-btn"><i class="fas fa-chevron-left"></i></button>
                <button class="page-btn active">1</button>
                <button class="page-btn">2</button>
                <button class="page-btn">3</button>
                <button class="page-btn">4</button>
                <button class="page-btn">5</button>
                <button class="page-btn"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
    </main>

    <!-- Citizen Details Modal -->
    <div id="citizenModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Citizen Details</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="citizen-details" id="citizenDetails">
                <!-- Citizen details will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- New Citizen Modal -->
    <div id="newCitizenModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Citizen</h3>
                <button class="close-btn" onclick="closeNewCitizenModal()">&times;</button>
            </div>
            <form id="newCitizenForm" class="citizen-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name">Full Name</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" name="age" required>
                    </div>
                    <div class="form-group">
                        <label for="contact">Contact</label>
                        <input type="tel" id="contact" name="contact" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="dob">Date of Birth</label>
                        <input type="date" id="dob" name="dob" required>
                    </div>
                    <div class="form-group">
                        <label for="gender">Gender</label>
                        <select id="gender" name="gender" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="maritalStatus">Marital Status</label>
                        <select id="maritalStatus" name="maritalStatus" required>
                            <option value="">Select Status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Divorced">Divorced</option>
                            <option value="Widowed">Widowed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="education">Education</label>
                        <input type="text" id="education" name="education" required>
                    </div>
                    <div class="form-group">
                        <label for="occupation">Occupation</label>
                        <input type="text" id="occupation" name="occupation" required>
                    </div>
                    <div class="form-group">
                        <label for="income">Annual Income</label>
                        <input type="text" id="income" name="income" required>
                    </div>
                    <div class="form-group">
                        <label for="familyMembers">Family Members</label>
                        <input type="number" id="familyMembers" name="familyMembers" required>
                    </div>
                    <div class="form-group full-width">
                        <label for="address">Address</label>
                        <textarea id="address" name="address" required></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-btn" onclick="closeNewCitizenModal()">Cancel</button>
                    <button type="submit" class="submit-btn">Add Citizen</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle">
        <i class="fas fa-moon"></i>
    </button>

    <script>
        // Sample citizen data
        const citizens = [
            {
                id: "CIT001",
                name: "Arjun Sharma",
                age: 35,
                contact: "+91-98765-43210",
                address: "123 MG Road, Bangalore, Karnataka",
                occupation: "Software Engineer",
                status: "Active",
                details: {
                    email: "arjun.sharma@email.com",
                    dob: "1988-05-15",
                    gender: "Male",
                    maritalStatus: "Married",
                    education: "B.Tech in Computer Science",
                    income: "₹12,00,000",
                    familyMembers: 3,
                    registrationDate: "2023-01-15",
                    lastUpdated: "2024-02-20"
                }
            },
            {
                id: "CIT002",
                name: "Priya Patel",
                age: 28,
                contact: "+91-98765-43211",
                address: "456 Nehru Place, Delhi",
                occupation: "Teacher",
                status: "Active",
                details: {
                    email: "priya.patel@email.com",
                    dob: "1995-08-22",
                    gender: "Female",
                    maritalStatus: "Single",
                    education: "M.Ed",
                    income: "₹6,50,000",
                    familyMembers: 1,
                    registrationDate: "2023-02-01",
                    lastUpdated: "2024-02-19"
                }
            },
            {
                id: "CIT003",
                name: "Rajesh Kumar",
                age: 42,
                contact: "+91-98765-43212",
                address: "789 Marine Drive, Mumbai, Maharashtra",
                occupation: "Doctor",
                status: "Active",
                details: {
                    email: "rajesh.kumar@email.com",
                    dob: "1981-03-10",
                    gender: "Male",
                    maritalStatus: "Married",
                    education: "MBBS, MD",
                    income: "₹25,00,000",
                    familyMembers: 4,
                    registrationDate: "2023-02-15",
                    lastUpdated: "2024-02-18"
                }
            },
            {
                id: "CIT004",
                name: "Anjali Gupta",
                age: 31,
                contact: "+91-98765-43213",
                address: "321 Park Street, Kolkata, West Bengal",
                occupation: "Architect",
                status: "Active",
                details: {
                    email: "anjali.gupta@email.com",
                    dob: "1992-11-05",
                    gender: "Female",
                    maritalStatus: "Married",
                    education: "B.Arch",
                    income: "₹9,50,000",
                    familyMembers: 2,
                    registrationDate: "2023-03-01",
                    lastUpdated: "2024-02-17"
                }
            },
            {
                id: "CIT005",
                name: "Amit Singh",
                age: 45,
                contact: "+91-98765-43214",
                address: "654 Connaught Place, Delhi",
                occupation: "Business Owner",
                status: "Active",
                details: {
                    email: "amit.singh@email.com",
                    dob: "1978-07-20",
                    gender: "Male",
                    maritalStatus: "Married",
                    education: "MBA",
                    income: "₹35,00,000",
                    familyMembers: 3,
                    registrationDate: "2023-03-15",
                    lastUpdated: "2024-02-16"
                }
            },
            {
                id: "CIT006",
                name: "Neha Reddy",
                age: 29,
                contact: "+91-98765-43215",
                address: "987 Jubilee Hills, Hyderabad, Telangana",
                occupation: "Marketing Manager",
                status: "Active",
                details: {
                    email: "neha.reddy@email.com",
                    dob: "1994-04-12",
                    gender: "Female",
                    maritalStatus: "Single",
                    education: "MBA in Marketing",
                    income: "₹8,50,000",
                    familyMembers: 1,
                    registrationDate: "2023-04-01",
                    lastUpdated: "2024-02-15"
                }
            },
            {
                id: "CIT007",
                name: "Vikram Verma",
                age: 38,
                contact: "+91-98765-43216",
                address: "147 Sector 17, Chandigarh",
                occupation: "Police Officer",
                status: "Active",
                details: {
                    email: "vikram.verma@email.com",
                    dob: "1985-09-25",
                    gender: "Male",
                    maritalStatus: "Married",
                    education: "Bachelor's in Law",
                    income: "₹7,50,000",
                    familyMembers: 3,
                    registrationDate: "2023-04-15",
                    lastUpdated: "2024-02-14"
                }
            },
            {
                id: "CIT008",
                name: "Pooja Iyer",
                age: 33,
                contact: "+91-98765-43217",
                address: "258 Anna Salai, Chennai, Tamil Nadu",
                occupation: "Nurse",
                status: "Active",
                details: {
                    email: "pooja.iyer@email.com",
                    dob: "1990-12-30",
                    gender: "Female",
                    maritalStatus: "Married",
                    education: "B.Sc Nursing",
                    income: "₹6,00,000",
                    familyMembers: 2,
                    registrationDate: "2023-05-01",
                    lastUpdated: "2024-02-13"
                }
            },
            {
                id: "CIT009",
                name: "Rahul Menon",
                age: 41,
                contact: "+91-98765-43218",
                address: "369 MG Road, Kochi, Kerala",
                occupation: "Firefighter",
                status: "Active",
                details: {
                    email: "rahul.menon@email.com",
                    dob: "1982-06-18",
                    gender: "Male",
                    maritalStatus: "Married",
                    education: "Diploma in Fire Safety",
                    income: "₹5,50,000",
                    familyMembers: 4,
                    registrationDate: "2023-05-15",
                    lastUpdated: "2024-02-12"
                }
            },
            {
                id: "CIT010",
                name: "Meera Nair",
                age: 27,
                contact: "+91-98765-43219",
                address: "741 MG Road, Thiruvananthapuram, Kerala",
                occupation: "Graphic Designer",
                status: "Active",
                details: {
                    email: "meera.nair@email.com",
                    dob: "1996-01-28",
                    gender: "Female",
                    maritalStatus: "Single",
                    education: "B.Des in Graphic Design",
                    income: "₹5,00,000",
                    familyMembers: 1,
                    registrationDate: "2023-06-01",
                    lastUpdated: "2024-02-11"
                }
            },
            {
                id: "CIT011",
                name: "Aditya Kapoor",
                age: 36,
                contact: "+91-98765-43220",
                address: "852 Connaught Place, Delhi",
                occupation: "Chef",
                status: "Active",
                details: {
                    email: "aditya.kapoor@email.com",
                    dob: "1987-10-15",
                    gender: "Male",
                    maritalStatus: "Married",
                    education: "Diploma in Culinary Arts",
                    income: "₹8,00,000",
                    familyMembers: 2,
                    registrationDate: "2023-06-15",
                    lastUpdated: "2024-02-10"
                }
            },
            {
                id: "CIT012",
                name: "Sneha Desai",
                age: 30,
                contact: "+91-98765-43221",
                address: "963 Church Street, Bangalore, Karnataka",
                occupation: "Accountant",
                status: "Active",
                details: {
                    email: "sneha.desai@email.com",
                    dob: "1993-03-22",
                    gender: "Female",
                    maritalStatus: "Single",
                    education: "CA",
                    income: "₹12,00,000",
                    familyMembers: 1,
                    registrationDate: "2023-07-01",
                    lastUpdated: "2024-02-09"
                }
            },
            {
                id: "CIT013",
                name: "Rohan Malhotra",
                age: 44,
                contact: "+91-98765-43222",
                address: "159 Park Street, Kolkata, West Bengal",
                occupation: "Real Estate Agent",
                status: "Active",
                details: {
                    email: "rohan.malhotra@email.com",
                    dob: "1979-08-05",
                    gender: "Male",
                    maritalStatus: "Married",
                    education: "B.Com",
                    income: "₹15,00,000",
                    familyMembers: 3,
                    registrationDate: "2023-07-15",
                    lastUpdated: "2024-02-08"
                }
            },
            {
                id: "CIT014",
                name: "Ananya Rao",
                age: 32,
                contact: "+91-98765-43223",
                address: "267 MG Road, Bangalore, Karnataka",
                occupation: "Dentist",
                status: "Active",
                details: {
                    email: "ananya.rao@email.com",
                    dob: "1991-11-12",
                    gender: "Female",
                    maritalStatus: "Married",
                    education: "BDS",
                    income: "₹18,00,000",
                    familyMembers: 2,
                    registrationDate: "2023-08-01",
                    lastUpdated: "2024-02-07"
                }
            },
            {
                id: "CIT015",
                name: "Karthik Pillai",
                age: 39,
                contact: "+91-98765-43224",
                address: "378 MG Road, Kochi, Kerala",
                occupation: "Electrician",
                status: "Active",
                details: {
                    email: "karthik.pillai@email.com",
                    dob: "1984-04-28",
                    gender: "Male",
                    maritalStatus: "Married",
                    education: "ITI in Electrical",
                    income: "₹4,50,000",
                    familyMembers: 3,
                    registrationDate: "2023-08-15",
                    lastUpdated: "2024-02-06"
                }
            },
            {
                id: "CIT016",
                name: "Divya Krishnan",
                age: 26,
                contact: "+91-98765-43225",
                address: "486 MG Road, Chennai, Tamil Nadu",
                occupation: "Journalist",
                status: "Active",
                details: {
                    email: "divya.krishnan@email.com",
                    dob: "1997-07-15",
                    gender: "Female",
                    maritalStatus: "Single",
                    education: "MA in Journalism",
                    income: "₹5,50,000",
                    familyMembers: 1,
                    registrationDate: "2023-09-01",
                    lastUpdated: "2024-02-05"
                }
            },
            {
                id: "CIT017",
                name: "Arun Nambiar",
                age: 37,
                contact: "+91-98765-43226",
                address: "597 MG Road, Thiruvananthapuram, Kerala",
                occupation: "Mechanical Engineer",
                status: "Active",
                details: {
                    email: "arun.nambiar@email.com",
                    dob: "1986-12-20",
                    gender: "Male",
                    maritalStatus: "Married",
                    education: "B.Tech in Mechanical",
                    income: "₹9,50,000",
                    familyMembers: 2,
                    registrationDate: "2023-09-15",
                    lastUpdated: "2024-02-04"
                }
            },
            {
                id: "CIT018",
                name: "Lakshmi Menon",
                age: 34,
                contact: "+91-98765-43227",
                address: "618 MG Road, Kochi, Kerala",
                occupation: "Pharmacist",
                status: "Active",
                details: {
                    email: "lakshmi.menon@email.com",
                    dob: "1989-02-08",
                    gender: "Female",
                    maritalStatus: "Married",
                    education: "B.Pharm",
                    income: "₹7,00,000",
                    familyMembers: 2,
                    registrationDate: "2023-10-01",
                    lastUpdated: "2024-02-03"
                }
            },
            {
                id: "CIT019",
                name: "Suresh Iyer",
                age: 40,
                contact: "+91-98765-43228",
                address: "729 MG Road, Thiruvananthapuram, Kerala",
                occupation: "Construction Manager",
                status: "Active",
                details: {
                    email: "suresh.iyer@email.com",
                    dob: "1983-05-25",
                    gender: "Male",
                    maritalStatus: "Married",
                    education: "B.Tech in Civil",
                    income: "₹8,50,000",
                    familyMembers: 3,
                    registrationDate: "2023-10-15",
                    lastUpdated: "2024-02-02"
                }
            },
            {
                id: "CIT020",
                name: "Deepa Nair",
                age: 28,
                contact: "+91-98765-43229",
                address: "831 MG Road, Kochi, Kerala",
                occupation: "Fitness Trainer",
                status: "Active",
                details: {
                    email: "deepa.nair@email.com",
                    dob: "1995-09-10",
                    gender: "Female",
                    maritalStatus: "Single",
                    education: "Diploma in Fitness Training",
                    income: "₹4,00,000",
                    familyMembers: 1,
                    registrationDate: "2023-11-01",
                    lastUpdated: "2024-02-01"
                }
            }
        ];

        // Theme Toggle Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.querySelector('.theme-toggle');
            const themeIcon = themeToggle.querySelector('i');
            
            // Check for saved theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
                updateThemeIcon(savedTheme);
            }

            // Theme toggle click handler
            themeToggle.addEventListener('click', function() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateThemeIcon(newTheme);
            });

            // Update theme icon
            function updateThemeIcon(theme) {
                themeIcon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }

            // Initialize citizens table
            initializeCitizensTable();
        });

        function initializeCitizensTable() {
            const tableBody = document.getElementById('citizensTableBody');
            tableBody.innerHTML = '';

            citizens.forEach(citizen => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${citizen.id}</td>
                    <td>${citizen.name}</td>
                    <td>${citizen.age}</td>
                    <td>${citizen.contact}</td>
                    <td>${citizen.address}</td>
                    <td>${citizen.occupation}</td>
                    <td><span class="status-badge status-${citizen.status.toLowerCase()}">${citizen.status}</span></td>
                    <td>
                        <button class="action-btn view-btn" title="View citizen details" onclick="viewCitizen('${citizen.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-btn edit-btn" title="Edit citizen details" onclick="editCitizen('${citizen.id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn delete-btn" title="Delete citizen" onclick="deleteCitizen('${citizen.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        function viewCitizen(id) {
            const citizen = citizens.find(c => c.id === id);
            if (citizen) {
                const detailsContainer = document.getElementById('citizenDetails');
                detailsContainer.innerHTML = `
                    <div class="detail-group">
                        <div class="detail-label">Full Name</div>
                        <div class="detail-value">${citizen.name}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Citizen ID</div>
                        <div class="detail-value">${citizen.id}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Age</div>
                        <div class="detail-value">${citizen.age}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Contact</div>
                        <div class="detail-value">${citizen.contact}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Email</div>
                        <div class="detail-value">${citizen.details.email}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Date of Birth</div>
                        <div class="detail-value">${citizen.details.dob}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Gender</div>
                        <div class="detail-value">${citizen.details.gender}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Marital Status</div>
                        <div class="detail-value">${citizen.details.maritalStatus}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Education</div>
                        <div class="detail-value">${citizen.details.education}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Occupation</div>
                        <div class="detail-value">${citizen.occupation}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Annual Income</div>
                        <div class="detail-value">${citizen.details.income}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Family Members</div>
                        <div class="detail-value">${citizen.details.familyMembers}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Address</div>
                        <div class="detail-value">${citizen.address}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Registration Date</div>
                        <div class="detail-value">${citizen.details.registrationDate}</div>
                    </div>
                    <div class="detail-group">
                        <div class="detail-label">Last Updated</div>
                        <div class="detail-value">${citizen.details.lastUpdated}</div>
                    </div>
                `;
                document.getElementById('citizenModal').style.display = 'block';
            }
        }

        function closeModal() {
            document.getElementById('citizenModal').style.display = 'none';
        }

        function editCitizen(id) {
            // Implement edit functionality
            alert('Edit functionality to be implemented');
        }

        function deleteCitizen(id) {
            if (confirm('Are you sure you want to delete this citizen?')) {
                // Implement delete functionality
                alert('Delete functionality to be implemented');
            }
        }

        function openNewCitizenModal() {
            document.getElementById('newCitizenModal').style.display = 'block';
        }

        function closeNewCitizenModal() {
            document.getElementById('newCitizenModal').style.display = 'none';
        }

        // Add this to your existing DOMContentLoaded event listener
        document.addEventListener('DOMContentLoaded', function() {
            // ... existing code ...

            // Add form submission handler
            const newCitizenForm = document.getElementById('newCitizenForm');
            newCitizenForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Generate a new ID
                const newId = `CIT${String(citizens.length + 1).padStart(3, '0')}`;
                
                // Create new citizen object
                const newCitizen = {
                    id: newId,
                    name: document.getElementById('name').value,
                    age: parseInt(document.getElementById('age').value),
                    contact: document.getElementById('contact').value,
                    address: document.getElementById('address').value,
                    occupation: document.getElementById('occupation').value,
                    status: "Active",
                    details: {
                        email: document.getElementById('email').value,
                        dob: document.getElementById('dob').value,
                        gender: document.getElementById('gender').value,
                        maritalStatus: document.getElementById('maritalStatus').value,
                        education: document.getElementById('education').value,
                        income: document.getElementById('income').value,
                        familyMembers: parseInt(document.getElementById('familyMembers').value),
                        registrationDate: new Date().toISOString().split('T')[0],
                        lastUpdated: new Date().toISOString().split('T')[0]
                    }
                };

                // Add to citizens array
                citizens.push(newCitizen);

                // Refresh the table
                initializeCitizensTable();

                // Close the modal and reset the form
                closeNewCitizenModal();
                newCitizenForm.reset();

                // Show success message
                alert('New citizen added successfully!');
            });
        });
    </script>
</body>